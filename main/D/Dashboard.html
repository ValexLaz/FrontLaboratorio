<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Laboratorio - Dashboard</title>
    <style src="styles.css"></style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß™ Sistema de Laboratorio</h1>
            <p>Gesti√≥n integral de an√°lisis m√©dicos y resultados</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">Dashboard</button>
            <button class="nav-tab" onclick="showTab('test-types')">Test Types</button>
            <button class="nav-tab" onclick="showTab('results')">Results Service</button>
            <button class="nav-tab" onclick="showTab('result-fields')">Result Fields Service</button>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="total-test-types">-</div>
                    <div class="stat-label">Total Test Types</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-results">-</div>
                    <div class="stat-label">Total Results</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="total-result-fields">-</div>
                    <div class="stat-label">Result Fields</div>
                </div>
            </div>

            <div class="service-section">
                <h2 class="service-title">üîó Enlaces R√°pidos</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <a href="http://localhost:5262/swagger" target="_blank" class="btn btn-primary">Test Types Service Swagger</a>
                    <a href="http://localhost:5272/swagger" target="_blank" class="btn btn-primary">Results Service Swagger</a>
                    <a href="http://localhost:5175/swagger" target="_blank" class="btn btn-primary">Result Fields Service Swagger</a>
                </div>
            </div>
        </div>

        <!-- Test Types Tab -->
        <div id="test-types" class="tab-content">
            <div class="service-section">
                <div class="service-header">
                    <h2 class="service-title">üè∑Ô∏è Test Types Management</h2>
                    <button class="btn btn-success" onclick="openModal('create-test-type-modal')">Crear Test Type</button>
                </div>

                <div id="test-types-data">
                    <div class="loading">Cargando test types...</div>
                </div>
            </div>
        </div>

        <!-- Results Service Tab -->
        <div id="results" class="tab-content">
            <div class="service-section">
                <div class="service-header">
                    <h2 class="service-title">üìä Results Management</h2>
                    <button class="btn btn-success" onclick="openModal('create-result-modal')">Crear Result</button>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Filtrar por Order ID:</label>
                        <input type="number" id="filter-order-id" placeholder="Order ID">
                    </div>
                    <div class="form-group">
                        <label>Filtrar por Patient ID:</label>
                        <input type="number" id="filter-patient-id" placeholder="Patient ID">
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" onclick="loadResultsByFilter()">Filtrar</button>
                    </div>
                </div>

                <div id="results-data">
                    <div class="loading">Cargando results...</div>
                </div>
            </div>
        </div>

        <!-- Result Fields Service Tab -->
        <div id="result-fields" class="tab-content">
            <div class="service-section">
                <div class="service-header">
                    <h2 class="service-title">üìù Result Fields Management</h2>
                    <button class="btn btn-success" onclick="openModal('create-result-field-modal')">Crear Result Field</button>
                </div>

                <div id="result-fields-data">
                    <div class="loading">Cargando result fields...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Create Test Type Modal -->
    <div id="create-test-type-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Crear Nuevo Test Type</h3>
                <button class="close" onclick="closeModal('create-test-type-modal')">&times;</button>
            </div>
            <form id="create-test-type-form">
                <div class="form-group">
                    <label>Name: <span style="color: red">*</span></label>
                    <input type="text" id="test-type-name" required placeholder="Ej: Hemograma Completo">
                </div>
                <div class="form-group">
                    <label>Description:</label>
                    <textarea id="test-type-description" rows="3" placeholder="Descripci√≥n opcional del tipo de an√°lisis"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn" onclick="closeModal('create-test-type-modal')" style="background: #6c757d; color: white;">Cancelar</button>
                    <button type="submit" class="btn btn-success">Crear Test Type</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Result Modal -->
    <div id="create-result-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Crear Nuevo Result</h3>
                <button class="close" onclick="closeModal('create-result-modal')">&times;</button>
            </div>
            <form id="create-result-form">
                <div class="form-group">
                    <label>Order ID: <span style="color: red">*</span></label>
                    <input type="number" id="result-order-id" required>
                </div>
                <div class="form-group">
                    <label>Patient ID: <span style="color: red">*</span></label>
                    <input type="number" id="result-patient-id" required>
                </div>
                <div class="form-group">
                    <label>Test Type ID: <span style="color: red">*</span></label>
                    <input type="number" id="result-test-type-id" required>
                </div>
                <div class="form-group">
                    <label>Status: <span style="color: red">*</span></label>
                    <select id="result-status" required>
                        <option value="">Seleccionar status</option>
                        <option value="Pendiente">Pendiente</option>
                        <option value="En Proceso">En Proceso</option>
                        <option value="Completado">Completado</option>
                    </select>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn" onclick="closeModal('create-result-modal')" style="background: #6c757d; color: white;">Cancelar</button>
                    <button type="submit" class="btn btn-success">Crear Result</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Create Result Field Modal -->
    <div id="create-result-field-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Crear Nuevo Result Field</h3>
                <button class="close" onclick="closeModal('create-result-field-modal')">&times;</button>
            </div>
            <form id="create-result-field-form">
                <div class="form-group">
                    <label>Result ID: <span style="color: red">*</span></label>
                    <input type="number" id="rf-result-id" required>
                </div>
                <div class="form-group">
                    <label>Test Type ID: <span style="color: red">*</span></label>
                    <input type="number" id="rf-test-type-id" required>
                </div>
                <div class="form-group">
                    <label>Field ID: <span style="color: red">*</span></label>
                    <input type="number" id="rf-field-id" required>
                </div>
                <div class="form-group">
                    <label>Value: <span style="color: red">*</span></label>
                    <input type="text" id="rf-value" required placeholder="Valor del resultado">
                </div>
                <div class="form-group">
                    <label>Comment:</label>
                    <textarea id="rf-comment" rows="3" placeholder="Comentario opcional"></textarea>
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                    <button type="button" class="btn" onclick="closeModal('create-result-field-modal')" style="background: #6c757d; color: white;">Cancelar</button>
                    <button type="submit" class="btn btn-success">Crear Result Field</button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript separado -->
    <script src="dashboard.js"></script>
</body>
</html>